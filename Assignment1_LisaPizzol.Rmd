---
title: "Assignment 1 - Project Proposal"
author: "Lisa Pizzol"
output:
  bookdown::html_document2
---

```{r Section 1, message=FALSE, warning=FALSE, include=FALSE}
# Section 1 -  Loading Libraries
library(rmarkdown)
library(bookdown)
library(knitr)
library(tidyverse)
library(readr)
library(kableExtra)
library(plotly)

# read in data 
temperature_anomaly <- read_csv("Data/temperature-anomaly.csv")

```


# Research question 
This assignment will explore the question: 

<div align = 'center'>
**How have global average temperatures changed overtime?** </div>

It will specifically look at data for global average temperatures relative to the average temperature for the period between 1961 and 1990. 

# Data set Introduction {#refsection}
The data used in this assignment is from Ritchie etal., 2020, and can be found at [Our World in Data](https://ourworldindata.org/co2-and-greenhouse-gas-emissions). It contains global average temperatures relative to the average temperature for the time period between 1961 and 1990, for the Entire Globe; the Southern Hemisphere; and the Northern Hemisphere, from 1850 to 2023. 

The variables contained in this data set are shown below in Table \@ref(tab:data) - Variable Names. The variable Entity contains categorical information of either Global, Northern Hemisphere or Southern Hemisphere, meanwhile the variable year contains values from 1850 to 2023. All other variables are described in Table \@ref(tab:data). 
```{r data, echo=TRUE, message=FALSE, warning=FALSE}
# table of variable names
kable(names(temperature_anomaly),caption = "Variable Names", col.names = 'Names') %>%
  kable_styling()
```

# Data set description
The data set contains `r ncol(temperature_anomaly)` variables as outlined in Section \@ref(refsection) - Data set Introduction above and `r nrow(temperature_anomaly)` observations.
The inline code for the previous sentence can be seen below in Figure \@ref(fig:data2).

```{r data2, echo=TRUE, message=FALSE, warning=FALSE, fig.cap = "Image of the inline code for data description"}
# show image of inline code
include_graphics("Image/Description_size_of_data.png")
```

The variable types for the first two observations in the data set are displayed below.

```{r data3, echo=TRUE, message=FALSE, warning=FALSE, fig.cap = "Variable types for the first two observations in the data set"}
str(head(temperature_anomaly,2))

```

The above information shows that the variable Entity is a character variable meanwhile the remaining four variables are all numeric. 

# Data Summary

```{r data4, message=FALSE, warning=FALSE}
measure_mean<-temperature_anomaly %>%
  select(-Year) %>%
  group_by(Entity) %>%
  summarise_all(mean)

colnames(measure_mean)<-c("Entity","Mean Global Average Temperature","Mean Upper Bound Average Temperature", "Mean Lower Bound Average Temperature")


measure_median<-temperature_anomaly %>%
  select(-Year) %>%
  group_by(Entity) %>%
  summarise_all(median)

colnames(measure_median)<-c("Entity","Median Global Average Temperature","Median Upper Bound Average Temperature", "Median Lower Bound Average Temperature")

measures <- merge(measure_mean, measure_median) %>%
  select(1,2,5,3,6,4,7)


kable(measures ,caption = "Mean and Median for Global Average Temperatures including the Upper and Lower Bounds.") %>%
  kable_styling(bootstrap_options = c('bordered',"hover")) %>%
  column_spec(2:3,background = '#cbcbcb') %>%
  column_spec(6:7,background = '#cbcbcb') 



```
Table \@ref(tab:data4) shows the **mean** and **median** global average temperatures including the upper and lower bound temperature values. The values in this table indicate that the **mean** temperatures are slightly higher than the **median** and the Northern Hemisphere is slightly warmer than the Southern Hemisphere.  

# Visualisations
Below in Figure \@ref(fig:data5) are graphs of the average temperatures with their Upper and Lower values from 1850 until 2023, for the entire Globe; the Northern Hemisphere and the Southern Hemisphere.

```{r data5, message=FALSE, warning=FALSE, dpi = 150, fig.cap ="Average Temperature Anomly relative to average temperature between 1961 -1990' from 1850 to 2023"}
colnames(temperature_anomaly)[3]="Global Average Temperature"
colnames(temperature_anomaly)[4]="Lower Bound"
colnames(temperature_anomaly)[5]="Upper Bound"
temp<-temperature_anomaly %>% pivot_longer(cols = 3:5, names_to = "Type", values_to = "number")
p<-ggplot(temp,aes(x=Year, y=number, color =Type))+geom_point()+geom_line()+
  scale_colour_manual(values = c("#2375b3","grey","grey"))+
  theme(axis.line = element_line(linetype = 'solid'))+
  labs(y="Average Temperature Anomaly relative to average temperature between 1961 - 1990")+
  geom_hline(yintercept = 0, color = 'grey')+
  facet_grid(Entity~.)
p<-ggplotly(p) %>%
  layout(legend=list(orientation='h'))
p
```
Figure \@ref(fig:data5) shows the following key observations in relation to the analysis question, **How have global average temperatures changed overtime?**:

* *Average temperatures have increased since 1850 to 2023 from around -0.4 to 0.8. Making an increase of close to 1.2 degrees in this time frame.*
* *An increase in the Northern Hemisphere of 1.6 is from -0.4 in 1850 to 1.2 in 2023. Meanwhile, in the Southern Hemisphere an increase of 1.1 is from -0.4 in 1850 to 0.7 in 2023. Indicating the global temperature changed has increased more in the Northern Hemisphere than in the Southern Hemisphere.*

# References
Ritchie, H., Roser, M., &amp; Rosado, P. (2020, May 11). COâ‚‚ and greenhouse gas emissions. Our World in Data. https://ourworldindata.org/co2-and-greenhouse-gas-emissions 

